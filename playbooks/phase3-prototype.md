# Phase 3: Prototype プレイブック

> 設計をもとに、動作するプロトタイプを高速構築し、フィードバックを得る

## 前提条件

- Phase 2 が完了していること（aidlc-docs/aidlc-state.md で確認）
- `aidlc-docs/` 配下の全成果物が存在すること

---

## Step 1: Prototype Design（プロトタイプ設計）

### AIの行動

1. **Blueprint の成果物を読み込む**
   - architecture.md、ui-design.md、data-model.md を読み込む
   - プロトタイプに必要な最小限の要素を特定する

2. **プロトタイプのゴールを定義する**
   - このプロトタイプで検証したいことを明確にする
   - 人間に確認: 「プロトタイプで特に確認したいことはありますか？」

3. **最小限のエンティティを定義する**
   - data-model.md から、プロトタイプに必要な3〜5個のエンティティを抽出する
   - 属性は必要最小限に絞る

4. **主要ユースケースを定義する**
   - ui-design.md から、プロトタイプで再現する3〜5個の主要フローを選ぶ
   - ステップを簡潔に記述する

5. **モックデータを作成する**
   - 画面表示に使うサンプルデータをJSON形式で作成する
   - リアルに見える具体的なデータにする

6. **プロトタイプ用の技術スタックを決定する**
   - 高速構築に適したスタックを選定する
   - 人間に確認: 「プロトタイプの技術スタックはこれでよいですか？」

7. **対象外を明記する**
   - プロトタイプでは作らないものを明確にする（認証、エラーハンドリング等）

### 成果物の生成

- `aidlc-docs/prototype/design.md` を生成する
- テンプレート: `templates/prototype/design.md` を使用

### 記録

- `aidlc-docs/log.md` に対話サマリーを記録する

### 完了条件

- `aidlc-docs/prototype/design.md` が生成され、人間が確認した
- `aidlc-docs/aidlc-state.md` の Step 1 チェックボックスを `[x]` にする

---

## Step 2: Rapid Build（高速構築）

### AIの行動

1. **aidlc-docs/prototype/design.md を読み込む**
   - エンティティ、ユースケース、モックデータ、技術スタックを把握する

2. **プロジェクトを生成する**
   - 選定した技術スタックでプロジェクトをセットアップする
   - モックデータを組み込む
   - 主要画面を実装する

3. **ラピッドプロトタイピングの原則に従う**
   - 速度を最優先。品質は二の次
   - コピペOK、ハードコードOK
   - 静的データ / useState で十分
   - 型安全性不要
   - テスト不要
   - エラーハンドリング最小限

4. **動作確認する**
   - プロトタイプが起動するか確認する
   - 主要フローが動作するか確認する
   - 問題があればその場で修正する

### 成果物の生成

- `aidlc-docs/prototype/` 配下に動作するコードを生成する

### 記録

- `aidlc-docs/log.md` に対話サマリーを記録する
- 何を作ったか、動作確認の結果を記録する

### 完了条件

- プロトタイプが動作する状態になった
- `aidlc-docs/aidlc-state.md` の Step 2 チェックボックスを `[x]` にする

---

## Step 3: Review & Feedback（レビュー・フィードバック）

### AIの行動

1. **プロトタイプを人間に提示する**
   - プロトタイプの起動方法を伝える
   - 「プロトタイプを触ってみてください。フィードバックをお聞かせください」と伝える

2. **フィードバックを受け取る**
   - 人間のフィードバックを聞き、分類する

3. **フィードバックに基づき次のアクションを決定する**

   | フィードバック内容 | アクション |
   |-------------------|-----------|
   | そもそも方向性が違う | Phase 1 (Inception) に戻る。intent.md を修正 |
   | 設計を変えたい | Phase 2 (Blueprint) に戻る。該当する設計を修正 |
   | UI/操作感を改善したい | Step 2 に戻り、プロトタイプを修正して再ビルド |
   | これでOK | Phase 4 (Construction) に進む |

4. **戻る場合のルール**
   - `aidlc-docs/log.md` にフィードバックの理由と戻り先を記録する
   - `aidlc-docs/aidlc-state.md` の `Current Phase` を戻り先に更新する
   - 戻り先のフェーズのチェックボックスは、修正が必要なステップのみ `[ ]` に戻す
   - 修正完了後、再度このステップに戻ってくる

### 記録

- `aidlc-docs/log.md` にフィードバック内容と決定事項を記録する

### 完了条件（次に進む場合）

- 人間がプロトタイプを承認した
- `aidlc-docs/aidlc-state.md` の Step 3 チェックボックスを `[x]` にする
- `aidlc-docs/aidlc-state.md` の `Current Phase` を `Phase 4 - Construction` に更新する
